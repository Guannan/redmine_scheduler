- content_for :header_tags do
  = stylesheet_link_tag 'bookings', :plugin => 'redmine_scheduler'
%div
  %h2 Your Bookings
= render 'search_form'
/ On orphaned bookings
- unless @orph_bookings.empty?
  %div
    %h3 Orphaned Bookings
    %table.list.issues
      %thead
        %tr
          %th= link_to 'Patron Name', {:action => 'index', :sort_by => 'name', :from => {:year => @from.year.to_s, :month => @from.month.to_s, :day => @from.day.to_s}}
          %th= link_to 'Coach', {:action => 'index', :sort_by => 'coach', :from => {:year => @from.year.to_s, :month => @from.month.to_s, :day => @from.day.to_s}}
          %th= link_to 'Apt Time', {:action => 'index', :sort_by => 'apt_time', :from => {:year => @from.year.to_s, :month => @from.month.to_s, :day => @from.day.to_s}}
          %th Booked By:
      - @orph_bookings.each do |booking|
        %tr
          %td= link_to booking.name, {:action => 'show', :id => booking}
          %td= booking.coach
          %td= booking.apt_time.strftime("%D - %I:%M:%S %p")
          / probably can do with apt_time as well
          %td= link_to booking.author.name, user_path(booking.author)
    = will_paginate @orph_bookings, :params=>{:from => {:year => @from.year.to_s, :month => @from.month.to_s, :day => @from.day.to_s}}
/ On active bookings
- unless @act_bookings.empty?
  %div
    %h3 Active Bookings
    %table.list.issues
      %thead
        %tr
          %th= link_to 'Patron Name', {:action => 'index', :sort_by => 'name', :from => {:year => @from.year.to_s, :month => @from.month.to_s, :day => @from.day.to_s}}
          %th= link_to 'Coach', {:action => 'index', :sort_by => 'coach', :from => {:year => @from.year.to_s, :month => @from.month.to_s, :day => @from.day.to_s}}
          %th= link_to 'Apt Time', {:action => 'index', :sort_by => 'apt_time', :from => {:year => @from.year.to_s, :month => @from.month.to_s, :day => @from.day.to_s}}
          %th Booked By:
      - @act_bookings.each do |booking|
        %tr
          %td= link_to booking.name, {:action => 'show', :id => booking}
          %td= link_to booking.coach, user_path(booking.coach)
          %td= booking.apt_time.strftime("%D - %I:%M:%S %p")
          %td= link_to booking.author.name, user_path(booking.author)
    = will_paginate @act_bookings, :params=>{:from => {:year => @from.year.to_s, :month => @from.month.to_s, :day => @from.day.to_s}}
/ On cancelled bookings
- unless @canc_bookings.empty?
  %div
    %h3 Cancelled Bookings
    %table.list.issues
      %thead
        %tr
          %th= link_to 'Patron Name', {:action => 'index', :sort_by => 'name', :from => {:year => @from.year.to_s, :month => @from.month.to_s, :day => @from.day.to_s}}
          %th= link_to 'Coach', {:action => 'index', :sort_by => 'coach', :from => {:year => @from.year.to_s, :month => @from.month.to_s, :day => @from.day.to_s}}
          %th= link_to 'Apt Time', {:action => 'index', :sort_by => 'apt_time', :from => {:year => @from.year.to_s, :month => @from.month.to_s, :day => @from.day.to_s}}
          %th Booked By:
      - @canc_bookings.each do |booking|
        %tr
          %td= link_to booking.name, {:action => 'show', :id => booking}
          %td= booking.coach
          %td= booking.apt_time.strftime("%D - %I:%M:%S %p")
          %td= link_to booking.author.name, user_path(booking.author)
    = will_paginate @canc_bookings, :params=>{:from => {:year => @from.year.to_s, :month => @from.month.to_s, :day => @from.day.to_s}}
