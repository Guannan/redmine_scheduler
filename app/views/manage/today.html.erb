<%= render 'nav' %>
<h2>Today's Shifts</h2>
<div>
<% if @todayshifts.empty? && @todaylcshifts.empty? %>
<p>You don't have any shifts scheduled for today. If you believe that this is an error, please talk to Deborah!</p>
<% else %>
<p>You have the following shift or shifts scheduled today. To log time spent, please click on the clock button for the appropriate shift.</p>
<ul>
	<% @todayshifts.each do |shift| %>
		<li><%= shift.tracker.name %> : <%= link_to shift.subject, {:controller => 'issues', :action => 'show', :id => shift[:id] } %> : <%= link_to image_tag('time_add.png'), {:controller => 'timelog', :action => 'new', :issue_id => shift[:id]} %></li>
	<% end %>
</ul>
<ul>
	<% @todaylcshifts.each do |shift| %>
		<li><%= shift.tracker.name %> : <%= link_to shift.subject, {:controller => 'issues', :action => 'show', :id => shift[:id] } %> : <%= link_to image_tag('time_add.png'), {:controller => 'timelog', :action => 'new', :issue_id => shift[:id]} %></li>
		<% shift.booked_slots.each do |slot| %>
		  <ul>
			<li><%= format_time(slot.booking.apt_time) %> : <%= slot.booking.name %> <%= link_to 'Details...', {:action => 'show', :booking_id => slot.booking[:id]} %></li>
		  </ul>
		<% end %>
	<% end %>
</ul>
<% end %>
<p>All scheduled shifts for today (use these links if you are covering someone else's shift!)</p>
<ul>
	<% @allshiftstoday.each do |shift| %>
		<li><%= shift.tracker.name %> : <%= link_to shift.subject, {:controller => 'issues', :action => 'show', :id => shift[:id] } %> : <%= link_to image_tag('time_add.png'), {:controller => 'timelog', :action => 'new', :issue_id => shift[:id]} %></li>
	<% end %>
</ul>
<ul>
	<% @alllcshiftstoday.each do |shift| %>
		<li><%= shift.tracker.name %> : <%= link_to shift.subject, {:controller => 'issues', :action => 'show', :id => shift[:id] } %> : <%= link_to image_tag('time_add.png'), {:controller => 'timelog', :action => 'new', :issue_id => shift[:id]} %></li>
	<% end %>
</ul>
</div>
<% unless @mytasks.empty? %>
<div>
	<h3>My Tasks</h3>
	
	<table class="table table-striped">
		<thead>
		  <tr>
		  <th>Area</th>
		  <th>Description</th>
		  <th>Due</th>
		  <th>Log Time</th>
		  </tr>
		</thead>
		<% @mytasks.each do |task| %>
		<tbody>
		  <tr>
			<td><%= link_to task.project, {:controller => 'projects', :action => 'show', :id => task.project[:id] } %></td>
			<td><%= link_to task.subject, {:controller => 'issues', :action => 'show', :id => task[:id] } %></td>
			<td><%= link_to task.due_date, {:controller => 'issues', :action => 'show', :id => task[:id] } unless task.due_date.nil? %></td>
			<td><%= link_to image_tag('time_add.png'), {:controller => 'timelog', :action => 'new', :issue_id => task[:id]} %></td>
		  </tr>
		</tbody>
		<% end %>
    </table>
</div>
<% end %>

<% unless @mygoals.empty? %>
<div>
	<h3>My Training Goals</h3>
	
	<table class="table table-striped">
		<thead>
		  <tr>
		  <th>Description</th>
		  <th>Due</th>
		  <th>Log Time</th>
		  </tr>
		</thead>
		<% @mygoals.each do |goal| %>
		<tbody>
		  <tr>
			<td><%= link_to goal.subject, {:controller => 'issues', :action => 'show', :id => goal[:id] } %></td>
			<td><%= link_to goal.due_date, {:controller => 'issues', :action => 'show', :id => goal[:id] } unless goal.due_date.nil? %></td>
			<td><%= link_to image_tag('time_add.png'), {:controller => 'timelog', :action => 'new', :issue_id => goal[:id]} %></td>
		  </tr>
		</tbody>
		<% end %>
    </table>
</div>
<% end %>

<% content_for :header_tags do %>
    <%= stylesheet_link_tag 'bootstrap', :plugin => 'redmine_scheduler' %>
<% end %>